
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"> 
	<title>main</title>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/index.css">  
   	<script src="js/jquery.min.js"></script>
   	<script src="js/bootstrap.min.js"></script>
   	<script type="text/javascript" src="js/jquery.js"></script>
</head>

<script type="text/javascript">
	var request = new XMLHttpRequest();
	
	getProprietorInfo();
	
	getLoginInfo();
	
	function getLoginInfo(){
		$.get("proprietorJSP/getLoginInfo.jsp",function(result){
			
			var name = JSON.parse(result);
			$("#login_information").text("欢迎您，业主："+name+"!");
			
		});
	}
	
	function exit(){
		window.location.href="login.html"; 
		alert("退出成功");
	}
	
	function getProprietorInfo(){
		$.get("proprietorJSP/showUserInfos.jsp",function(result){
			var userInfo = JSON.parse(result); 
			$("#proprietorID").val(userInfo[0].User_ID);
			$("#proprietorName").val(userInfo[0].UNAME);
			$("#proprietorTel").val(userInfo[0].TEL);
			$("#proprietorHF").val(userInfo[0].HF);
			$("#proprietorHN").val(userInfo[0].HN);
		});
	}
	
	function toBuyCar(){
		window.location.href="carManageYZ.html?backurl=main_proprietor.html";
	}
	function toMyCar(){
		window.location.href="carManageYZ2.html?backurl=main_proprietor.html";
	}
	
	function toCar(){
		window.location.href="carManageYZ.html?backurl=main_proprietor.html";
	}
	
	function toInfo(){
		window.location.href="main_proprietor_info.html?backurl=main_proprietor.html"; 
	}
	
	function toService(){
		window.location.href="main_proprietor_service.html?backurl=main_proprietor.html"; 
	}
	function toComplaint(){
		window.location.href="complaints_owner.html?backurl=main_proprietor.html"; 
	}
	function toPay(){
		window.location.href="payment_owner.html?backurl=main_proprietor.html"; 
	}
	
	function toMessage(){
		window.location.href="MessageYZ.html?backurl=main_proprietor.html"; 
	}
		
	
	function sumbitProprietorInfo(){
		var UNAME = $("#proprietorName").val();
		var TEL = $("#proprietorTel").val();
		var url = "proprietorJSP/sumbitProprietorInfo.jsp?UNAME=";
		url += (UNAME+"&TEL=");
		url += TEL;
		$.get(url,function(result){
			var success = JSON.parse(result);
			if(success == 1){
				alert("修改成功");
				getProprietorInfo();
				getLoginInfo();
			}else{
				alert("修改失败");
			}
			
		});
	}
		
	
	
</script>
<body>
	<div class="header">
		<div class="logo">
			<img src="img/物业.png" style="height: 70px;padding-bottom: 5px">
		</div>
		
		<div class="title1">
			小区物业管理系统
		</div>
		<div class="title2">
			The Analysis and Design of Residence Community Property Management System
		</div>
		<div class="login_info">
			<label id="login_information">欢迎您，业主：</label>
			<a href="#" class ="exit-font" onclick="exit();">退出登录</a>
		</div>

	</div>
	
	<div class="navigation">
		<ul class="nav-1">
			<li class="nav-2"><img class="nav-img" src="img/主页.png"><a href="#" class="nav-3" onclick="toInfo();">个人信息</a></li>
			<li class="nav-2"><img class="nav-img" src="img/车位.png"><a class="nav-3" href="#" id="carManage" onclick="toBuyCar();">车位购买</a></li>
			<li class="nav-2"><img class="nav-img" src="img/车位2.png"><a class="nav-3" href="#" onclick="toMyCar();">我的车位</a></li>
			<li class="nav-2"><img class="nav-img" src="img/报修.png"><a href="#" class="nav-3" onclick="toService();">报修服务</a></li>
			<li class="nav-2"><img class="nav-img" src="img/缴费.png"><a href="#" class="nav-3" onclick="toPay();">缴费中心</a></li>
			<li class="nav-2"><img class="nav-img" src="img/投诉.png"><a href="#" class="nav-3" onclick="toComplaint();">投诉服务</a></li>
			<li class="nav-2"><img class="nav-img" src="img/通知.png"><a href="#" class="nav-3" onclick="toMessage();">通知中心</a></li>
		</ul>
	</div>
	
	<div>
	
	</div>
	<div class="container content-info">
		<div class = "container">
			<h3 class="page-header" id="headStyle">个人信息</h3>

			<form class="form-horizontal div-top" role="form">
				<fieldset>
				
					<div class="form-group">
						<label class="col-sm-5 control-label">业主编号：</label>
						
						<div class="col-sm-3">
							<input type="text" class="form-control input-width-half" id="proprietorID" readonly="readonly"
								   placeholder="请输入业主编号">
						</div>
					</div>
					
					<div class="form-group">
						<label class="col-sm-5 control-label">姓名：</label>
						
						<div class="col-sm-3">
							<input type="text" class="form-control input-width-half" id="proprietorName" 
								   placeholder="请输入名字">
						</div>

					</div>
					
					<div class="form-group">
						<label class="col-sm-5 control-label">联系方式：</label>
						
						<div class="col-sm-3">
							<input type="text" class="form-control input-width-half" id="proprietorTel" 
								   placeholder="请输入联系方式">
						</div>

					</div>
					
					<div class="form-group">
						<label class="col-sm-5 control-label">楼号：</label>
						
						<div class="col-sm-3">
							<input type="text" class="form-control input-width-half" id="proprietorHF" readonly="readonly"
								   placeholder="请输入楼号">
						</div>
					</div>
					
					<div class="form-group">
						<label class="col-sm-5 control-label">门牌号：</label>
						
						<div class="col-sm-3">
							<input type="text" class="form-control input-width-half" id="proprietorHN" readonly="readonly"
								   placeholder="请输入门牌号">
						</div>
					</div>
					
				</fieldset>
			</form>
	
			<hr/>
			<button class = "btn btn-primary" style="float:right;" onclick="sumbitProprietorInfo();">修改</button>
		</div>
	</div>
	<footer>
		Copyright©HHUC 刘凯祥 陆威 李凯凯
	</footer>
</body>
</html>